<h2 mat-dialog-title>
    <mat-icon>description</mat-icon>
    Application Details
</h2>

<mat-dialog-content>
    @if (isLoading()) {
    <div class="loading-state">
        <mat-spinner diameter="48"></mat-spinner>
        <p>Loading application details...</p>
    </div>
    } @else if (errorMessage()) {
    <div class="error-message">
        <mat-icon color="warn">error_outline</mat-icon>
        <p>{{ errorMessage() }}</p>
    </div>
    } @else if (applicationDetails()) {
    <div class="details-content">
        <div class="status-section">
            <mat-chip [color]="getStatusColor()" highlighted>
                {{ applicationDetails()!.status }}
            </mat-chip>
        </div>

        <div class="details-grid">
            <div class="detail-item">
                <mat-icon class="detail-icon">confirmation_number</mat-icon>
                <div class="detail-content">
                    <span class="label">Application Number</span>
                    <span class="value">{{ applicationDetails()!.applicationNumber }}</span>
                </div>
            </div>

            <div class="detail-item">
                <mat-icon class="detail-icon">person</mat-icon>
                <div class="detail-content">
                    <span class="label">Customer Name</span>
                    <span class="value">{{ applicationDetails()!.customerName }}</span>
                </div>
            </div>

            <div class="detail-item">
                <mat-icon class="detail-icon">category</mat-icon>
                <div class="detail-content">
                    <span class="label">Loan Type</span>
                    <span class="value">{{ applicationDetails()!.loanType }}</span>
                </div>
            </div>

            <div class="detail-item">
                <mat-icon class="detail-icon">currency_rupee</mat-icon>
                <div class="detail-content">
                    <span class="label">Requested Amount</span>
                    <span class="value">₹{{ applicationDetails()!.requestedAmount | number:'1.2-2' }}</span>
                </div>
            </div>

            <div class="detail-item">
                <mat-icon class="detail-icon">check_circle</mat-icon>
                <div class="detail-content">
                    <span class="label">Approved Amount</span>
                    <span class="value">₹{{ (applicationDetails()!.approvedAmount || 0) | number:'1.2-2' }}</span>
                </div>
            </div>

            <div class="detail-item">
                <mat-icon class="detail-icon">percent</mat-icon>
                <div class="detail-content">
                    <span class="label">Interest Rate</span>
                    <span class="value">{{ applicationDetails()!.interestRate }}%</span>
                </div>
            </div>

            <div class="detail-item">
                <mat-icon class="detail-icon">schedule</mat-icon>
                <div class="detail-content">
                    <span class="label">Requested Tenure</span>
                    <span class="value">{{ applicationDetails()!.requestedTenureInMonths }} months</span>
                </div>
            </div>
        </div>

        @if (applicationDetails()!.managerComments) {
        <div class="comments-section">
            <h3>
                <mat-icon>comment</mat-icon>
                Manager Comments
            </h3>
            <p class="comments">{{ applicationDetails()!.managerComments }}</p>
        </div>
        }
    </div>
    }
</mat-dialog-content>

<mat-dialog-actions align="end">
    <button mat-button (click)="onClose()">Close</button>
</mat-dialog-actions>